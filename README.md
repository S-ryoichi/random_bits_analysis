# random_bits_analysis

## はじめに

物理乱数の検証を行うプログラムをまとめるリポジトリとなっている．

本プログラムの目的は，異なる手法で生成した1[Gbit]の乱数データを周期性の観点から検証を行うことである．

検証手法として，乱数をn[bit]の値から次のビットの出現確率に偏りがあるのかを検証するもの，n[bit]から次のn[bit]の出現確率に偏りがあるのかを検証するものがある．

本プログラムのメインとなる検証は後者であり，n[bit]状態の出現確率をマルコフ過程として捉え確率を算出し，統計的に解析するものである．

## 検証について

本プログラムで主に使われているものは，マルコフ過程を用いた状態遷移確率であり，その値に対して仮設検定を用いて確率分布の確認を行っている．

この検証では，乱数系列を $l_{div}$ [bit]ごとに分割することで，系列全体を $l_{div}$ [bit]ごとに区切られた状態遷移ととらえることができる．

系列全体の長さを $L = \{L \in \mathbb{N} \mid L \gg l_{div}\}$ とし，系列長 $L$ の乱数列を $l_{div}$ [bit]ごとに区切ったときの状態の出現について時系列 $T = \{t \in \mathbb{Z}\ \mid 0 \leq t < \frac{L}{l_{div}}\}$ を定義する．

上記の定義の下で，系列全体における各状態は $S = \{s \in \mathbb{Z} \mid 0 \leq s < 2^{l_{div}}\}$ と表現することができ，時間 $t$ における状態を $X = \{x_t \in S \mid t \in T\}$ の集合ととらえる．

ある状態 $s_i, s_j = \{s_i, s_j \in S \mid 0 \leq i, j < 2^{l_{div}}\}$ を考える．

時間 $t$ に状態 $s_i$ が出現しひとつ前の状態が $s_{t - 1}$ であったときの確率は，条件付き確率を用いて $P(x_t = s_i \mid x_{t - 1} = s_j)$ と表現することができる．

これによって，状態 $S$ を時系列 $T$ における確率過程と捉えることができる．

状態 $S$ において，各状態の出現数を $n(s_i)$ と表現し，状態 $s_j$ から状態 $s_i$ への状態遷移数について $n(s_i \mid s_j)$ と表現する．

状態の集合 $S$ に対して確率過程のひとつであるマルコフ過程を考えたとき，状態 $s_j$ から状態 $s_i$ の出現確率 $P(x_t = s_t \mid x_{t - 1} = s_j)$ は，

$$P(x_t = s_t \mid x_{t - 1} = s_j) = \dfrac{n(s_i \mid s_j)}{n(s_i)}$$

となる．

## 使い方

### hexデータの場合

[data](./data/)ディレクトリに検定したい16進数表記のtxtファイルを置き，`./verify_hex.sh`を実行

### binデータの場合

[bin_ascii_data](./bin_ascii_data/)ディレクトリに検定したい2進数表記のtxtファイルを置き，`./verify_binascii.sh`を実行

## 確認方法

dataディレクトリに置いた乱数の数だけresultディレクトリに同名のディレクトリが作成される

その中にあるファイルはすべて検証結果となる
